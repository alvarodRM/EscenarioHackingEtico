#!/bin/bash

cat << "EOF"
 __      _
/ _\ ___| |_ _   _ _ __
\ \ / _ \ __| | | | '_ \
_\ \  __/ |_| |_| | |_) |
\__/\___|\__|\__,_| .__/
                  |_|
INICIO INSTALACION (2/2) VM9: bento/ubuntu-16.04 (Client4-RedPreProduccion-RedProducion)              
EOF


# Creación del Flag 8
cat << "EOF"
Creación del Flag 8
EOF
sudo mkdir /home/AdminWeb/documentos /home/AdminWeb/contactos /home/AdminWeb/cumpleaños /home/AdminWeb/telefonos /home/AdminWeb/informacion /home/AdminWeb/secret
sudo mkdir /home/AdminIT/documentos /home/AdminIT/contactos /home/AdminIT/cumpleaños /home/AdminIT/telefonos /home/AdminIT/informacion
sudo mkdir /home/WordpressDev/desarrolladores /home/WordpressDev/backups /home/WordpressDev/test /home/WordpressDev/lists
sudo mkdir /home/Joaquin17/documentos
sudo touch /home/AdminWeb/secret/flag8.txt
sudo touch /home/AdminWeb/secret/pistas.txt
echo "c2 a1 c2 a1 c2 a1 46 65 6c 69 63 69 74 61 63 69 6f 6e 65 73 20 68 61 73 20 6f 62 74 65 6e 69 64 6f 20 6c 61 20 c3 ba 6c 74 69 6d 61 20 62 61 6e 64 65 72 61 20 64 65 20 6c 61 20 64 69 66 69 63 75 6c 74 61 64 20 6d 65 64 69 61 20 64 65 6c 20 65 73 63 65 6e 61 72 69 6f 21 21 21 0d 0a 0d 0a" >> /home/AdminWeb/secret/flag8.txt
echo "46 6c 61 67 73 20 63 6f 6d 70 6c 65 74 61 64 6f 73 20 34 2f 34 20 64 65 20 6c 61 20 64 69 66 69 63 75 6c 74 61 64 20 6d 65 64 69 61 20 64 65 6c 20 65 73 63 65 6e 61 72 69 6f 2e" >> /home/AdminWeb/secret/flag8.txt
echo "43 6f 64 69 67 6f 20 73 65 63 72 65 74 6f 20 66 6c 61 67 38 3a 20 69 65 6e 39 33 6e 64 6f 30 64 38 33" >> /home/AdminWeb/secret/flag8.txt
echo "53 69 20 64 65 73 65 61 73 20 63 6f 6e 74 69 6e 75 61 72 20 63 6f 6e 20 65 6c 20 6e 69 76 65 6c 20 64 69 66 69 63 69 6c 20 64 65 6c 20 65 73 63 65 6e 61 72 69 6f 2c 20 65 6c 20 73 69 67 75 69 65 6e 74 65 20 66 6c 61 67 20 6c 6f 20 65 6e 63 6f 6e 74 72 61 72 61 73 20 65 6e 20 6c 61 20 49 50 3a 20 31 39 32 2e 31 36 38 2e 35 36 2e 32 30 31" >> /home/AdminWeb/secret/pistas.txt
echo "41 71 75 69 20 65 6e 20 65 6c 20 6e 69 76 65 6c 20 64 69 66 c3 ad 63 69 6c 20 6e 6f 20 64 61 6d 6f 73 20 6d 75 63 68 61 73 20 70 69 73 74 61 73 20 6a 65 6a 65" >> /home/AdminWeb/secret/pistas.txt
echo "54 65 20 64 65 73 65 61 6d 6f 73 20 71 75 65 20 74 65 6e 67 61 73 20 73 75 65 72 74 65 20 3b 29" >> /home/AdminWeb/secret/pistas.txt
sudo mkdir /home/Confidencial1 /home/Confidencial2 /home/Confidencial3 /home/Confidencial4 /home/Confidencial5 /home/Confidencial6 /home/Confidencial7 /home/Confidencial8 /home/Confidencial9 /home/Confidencial10
echo "no hay nada, picaste ;)" >> /home/Confidencial1/passwords.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial1/facturas.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial1/importante.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial2/passwords.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial2/facturas.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial2/importante.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial3/passwords.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial3/facturas.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial3/importante.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial4/passwords.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial4/facturas.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial4/importante.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial5/passwords.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial5/facturas.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial5/importante.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial6/passwords.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial6/facturas.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial6/importante.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial7/passwords.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial7/facturas.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial7/importante.txt
echo "Vium: Zwuiv, Aczvium: Ziliumt, Vqksvium: IluqvLVA, Jqzbplig: 10/12/1991, kpqtl vium: Ivi, xmb vium: Zcnw, Kwuxivg vium: MBAQB cxu" >> /home/Confidencial8/datosSecretos.txt
echo "Lqtnntzypd Czxly: apdnlc, dfcqplc, wl tyqzcxletnl" >> /home/Confidencial8/aficciones.txt
echo "Nc oáswkpc xo10, eqp KR 192.168.56.201 pq vkgpg pkpiwpc dcpfgtc 9 gueqpfkfc, nc dcpfgtc 10 nc qdvgpftáu uk eqpukiwgu eqorngvct gn ukiwkgpvg fguchíq: Fgdgtcu fg vqoct gn eqpvtqn fg nc oáswkpc xo10, itcekcu c ncu rkuvcu hceknkvcfcu cegtec fgn wuwctkq CfokpFPU a fgucttqnnct wp tcpuqoyctg wvknkbcpfq nc nkdtgtíc etarvqitcrja Hgtpgv. Gn tcpuqoyctg fgdgtáu fg glgewvctnq gp nc oáswkpc xo10 rctc ekhtct vqfqu nqu hkejgtqu swg ewgnicp fg /jqog/EqphkfgpvkcnKphqtocvkqp." >> /home/Confidencial8/pistaFinal.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial9/passwords.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial9/facturas.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial9/importante.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial10/passwords.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial10/facturas.txt
echo "no hay nada, picaste ;)" >> /home/Confidencial10/importante.txt


# Ocultamos algunos directorios de usuario, para que no aparezca al hacer un simple ls.
cat << "EOF"
Ocultamos algunos directorios de usuario, para que no aparezca al hacer un simple ls.
EOF
mv /home/AdminWeb /home/.AdminWeb
mv /home/AdminIT /home/.AdminIT
mv /home/WordpressDev /home/.WordpressDev
mv /home/.AdminWeb/secret /home/.AdminWeb/.secret


# Modificamos los permisos de las carpetas de usuarios, solo permitimos acceso al propietario.
cat << "EOF"
Modificamos los permisos de las carpetas de usuarios, solo permitimos acceso al propietario.
EOF
sudo chmod 700 /home/.AdminWeb
sudo chmod 700 /home/.AdminIT
sudo chmod 700 /home/.WordpressDev
sudo chmod 700 /home/vagrant


# Eliminamos todos los permisos de lectura y escritura de los directorios secretos.
cat << "EOF"
Eliminamos todos los permisos de lectura y escritura de los directorios secretos.
EOF
sudo chmod 100 /home/.AdminWeb/.secret
sudo chmod 100 /home/.AdminWeb/.secret/flag8.txt
sudo chmod 100 /home/.AdminWeb/.secret/pistas.txt


# Reiniciamos el servicio sshd.
cat << "EOF"  
Reiniciamos el servicio sshd.
EOF
sudo /usr/sbin/sshd


cat << "EOF"
 __      _
/ _\ ___| |_ _   _ _ __
\ \ / _ \ __| | | | '_ \
_\ \  __/ |_| |_| | |_) |
\__/\___|\__|\__,_| .__/
                  |_|
FIN INSTALACION (2/2) VM9: bento/ubuntu-16.04 (Client4-RedPreProduccion-RedProducion)                  
EOF
